<% content_for :title, "Mon profil" %>
<div class="row justify-content-center">
  <div class="col-4">
    <%= image_tag("profile_illustration.png", class: "img-fluid", style: "margin-bottom: -30px;") %>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h4>Informations de base</h4>
    <div class="card border-primary">
      <div class="card-body">
        <div class="text-center">
          <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :role => 'form'}) do |f| %>
            <%= devise_error_messages! %>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label :nom %>
                  <%= f.text_field :name, :autofocus => true, class: 'form-control' %>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label :email %>
                  <%= f.email_field :email, class: 'form-control', disabled: true %>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <% unless @preference == nil %>
                    <%= f.fields_for @preference do |p| %>
                      <%= p.label :ville_de_r√©sidence_principale %>
                      <%= p.text_field :city, class: 'form-control' %>
                    <% end %>
                  <% end %>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label :date_de_naissance %>
                  <%= f.text_field :birthdate, class: 'form-control', :placeholder => 'JJ/MM/AAAA' %>
                </div>
              </div>
            </div>
            <%= f.submit 'Mettre √† jour', :class => 'btn btn-round btn-primary btn-center' %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h4>Pr√©f√©rences de consommation</h4>
    <div class="card border-rose">
      <div class="card-body">
        <div class="text-center">
          <%= form_for(@preference, :html => { :method => :put, :role => 'form'}) do |f| %>
            <%= devise_error_messages! %>
            <div class="row text-left">
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label "Comment d√©crirais-tu ton r√©gime alimentaire ?" %>
                  <%= f.select(:regime, Preference.regimes.keys.map {|regime| [regime.titleize,regime]}, {}, {:class => 'form-control selectpicker'}) %>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label  "Quelle est la part de renouvelable dans ton contrat d'√©nergie ?" %>
                  <%= f.select(:energy_contract, Preference.energy_contracts.keys.map {|regime| [regime.humanize,regime]}, {}, {:class => 'form-control selectpicker'}) %>
                </div>
              </div>
            </div>
            <%= f.submit 'Mettre √† jour', :class => 'btn btn-round btn-rose btn-center' %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h4>Changement de mot de passe</h4>
    <div class="card border-warning">
      <div class="card-body">
        <div class="text-center">
          <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :role => 'form'}) do |f| %>
            <%= devise_error_messages! %>
              <div class="form-group">
                <%= f.label :nouveau_mot_de_passe %>
                <%= f.password_field :password, :autocomplete => 'off', class: 'form-control' %>
              </div>
              <div class="form-group">
                <%= f.label :confirmation_du_nouveau_mot_de_passe %>
                <%= f.password_field :password_confirmation, class: 'form-control' %>
              </div>
              <div class="form-group">
                <%= f.label :mot_de_passe_actuel %>
                <%= f.password_field :current_password, class: 'form-control' %>
              </div>
            <%= f.submit 'Changer mon mot de passe', :class => 'btn btn-round btn-warning' %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="authform">
  <h4>Supprimer mon compte</h4>
  <p>Tu nous quittes d√©j√† ? üò¢</p>
  <p>On sera un peu triste mais √ßa passera, promis</p>
  <%= button_to "Supprimer mon compte", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete, :class => 'btn btn-danger btn-round' %>
</div>


