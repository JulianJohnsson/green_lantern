<% content_for :title, "Comparer" %>
<h2 class="description text-center" style="padding-top: 40px;">
  <span style="opacity:0.3;">ğŸ¤–</span> Mon binÃ´me
</h2>
<div class="row justify-content-center align-items-center">
  <div class="col-md-6">
    <p class="description">
      Comparer ton impact, câ€™est cool et Ã§a permet de mieux te situer et placer tes efforts. Alors, on fait Ã§a avec qui?
    </p>
    <p class="description">
      Pssss, tu peux inviter d'autres personnes sur Carbo pour pouvoir te comparer Ã  eux :
      <%= link_to 'Comparer avec mes proches', new_user_invitation_path %>
    </p>
  </div>
  <div class="col-md-6">
    <%= render 'opponent_selector' %>
  </div>
</div>
<h2 class="description text-center" style="padding-top: 40px;">
  <i class="material-icons">whatshot</i> Mon carbomÃ¨tre
</h2>
<div class="row justify-content-center align-items-center">
  <div class="col-md-5">
    <%= render 'thermometre' %>
  </div>
  <div class="col-md-5 text-center">
    <div class="card">
      <div class="card-header card-header-info">
        <h4>Moyenne de <%= number_with_precision(@match_data[3], precision: 0) %> kgC02 / mois</h4>
      </div>
      <div class="card-body">
        <div class="text-left mr-auto ml-auto">
          <p>ğŸ‘‰ Câ€™est <%= number_with_precision(100*(620 - @match_data[3]).abs / 620, precision: 0) %>% de
            <% if @match_data[3] > 620 %>
            plus
            <% else %>
            moins
            <% end %>
            que la moyenne des franÃ§ais</p>
          <p>ğŸ‘‰ Câ€™est <%= number_with_precision(100*(460 - @match_data[3]).abs / 460, precision: 0) %>% de
            <% if @match_data[3] > 460 %>
            plus
            <% else %>
            moins
            <% end %>
            que la moyenne des membres Carbo</p>
          <% if @match_data[3] > 165 %>
            <p>ğŸ‘‰ Pour atteindre lâ€™objectif de lâ€™accord de Paris, il te faudrait diviser ton empreinte par <%= number_with_precision(@match_data[3] / 167, precision: 0) %> environ. Au boulot !</p>
          <% else %>
            <p>Bravo <%= current_user.name %>! Avec ton train de vie actuel, tu respectes dÃ©jÃ  la contrainte fixÃ©e par l'accord de Paris. Un vrai exemple pour nous tous !</p>
          <% end %>
        </div>
        <%= link_to "En savoir plus", "#versus", class: "btn btn-round btn-outline-info" %>
      </div>
    </div>
  </div>
</div>
<h2 class="description text-center" style="padding-top: 40px;">
  <i class="material-icons">star_border</i> Mon face Ã  face
</h2>
<p class="description">
  Les livres dâ€™histoire en parleront peut Ãªtre comme le match du siÃ¨cle : nous, on espÃ¨re surtout que Ã§a va tâ€™aider Ã  mieux situer ton impact et, Ã  terme, prendre de meilleures dÃ©cisions !
</p>
<div class="row text-center" id="versus">
  <div class="col-md-4 col-6">
    <div class="card">
      <div class="card-header card-header-violet">
        <div class="img-title">
          <%= image_tag "avatar.png", class: "img-fluid" %>
          <h4>
            TOI
          </h4>
        </div>
      </div>
      <div class="card-body">
        <p class="number number-lg">
          <%= number_with_precision(@match_data[3], precision: 0) %>
        </p>
        <p class="tag-line">
          <span class="tag tag-violet">
            kgCO2 / mois en moyenne
          </span>
        </p>
      </div>
    </div>
  </div>
  <div class='col-md-4 d-none d-md-block'>
    <%= render 'radar' %>
  </div>
  <div class="col-md-4 col-6">
    <div class="card">
      <div class="card-header card-header-orange">
        <div class="img-title">
          <%= image_tag @opponent.image, class: "img-fluid" %>
          <h4>
            <%= @opponent.name %>
          </h4>
        </div>
      </div>
      <div class="card-body">
        <p class="number number-lg">
          <%= number_with_precision(@match_data[4], precision: 0) %>
        </p>
        <p class="tag-line">
          <span class="tag tag-orange">
            kgCO2 / mois en moyenne
          </span>
        </p>
      </div>
    </div>
  </div>
  <div class="col-12 d-md-none">
    <%= render 'radar' %>
  </div>
</div>

<div class="row">
  <div class="col-12 text-center">
    <div class="card">
      <div class="card-header card-header-violet-orange">
        <div class="emoji-title">
          ğŸ¥Š
          <h4>RÃ©sumÃ© du match</h4>
        </div>
      </div>
      <div class="card-body">
        <% i = 0 %>
        <% @match_data[1].each do |c,v| %>
          <div class="row align-items-center category-resume" data-toggle="modal" data-target="#soon" aria-expanded="false" aria-controls="modal">
            <div class="col-3 text-right">
              <p class="number number-md">
                <% if v <= @match_data[2][i].to_i %>
                  <span class="winner">ğŸ–</span>
                <% end %>
                <%= number_with_precision(v, precision: 0) %>
              </p>
              <i class="material-icons">add_circle_outline</i>
            </div>
            <div class="col-6 category-title">
              <p class="emoji">
                <%= c.emoji %>
              </p>
              <p><%= c.name %><br>
              <span class="text-primary">Voir le dÃ©tail ></span></p>
            </div>
            <div class="col-3 text-left">
              <p class="number number-md">
                <%= number_with_precision(@match_data[2][i], precision:0) %>
                <% if v > @match_data[2][i].to_i %>
                  <span class="winner">ğŸ–</span>
                <% end %>
              </p>
              <i class="material-icons">add_circle_outline</i>
            </div>
          </div>
          <% i = i + 1 %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="soon" tabindex="-1" role="dialog" aria-labelledby="soonModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content text-center">
      <div class="modal-header text-center">
        <h5 class="modal-title" id="moreInfoModalLabel">BientÃ´t disponible</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= image_tag "onboarding_3.png", class: "img-fluid", :style => "width: 50%;" %>
        <p>
          Nous sommes en train de bosser dur pour te fournir un rÃ©sumÃ© dÃ©taillÃ© du match et des Ã©carts les plus important entre ton adversaire et toi.
        </p>
        <p>
          Si tu es particuliÃ¨rement intÃ©ressÃ© et / ou pressÃ© de dÃ©couvrir cette fonctionnalitÃ©, tu peux nous dire ce que tu en penses en nous Ã©crivant
        </p>
      </div>
      <div class="modal-footer">
        <%= link_to "Je veux voir plus de dÃ©tail", "mailto:team@hellocarbo.com", class: "btn btn-round btn-primary ml-auto mr-auto" %>
      </div>
    </div>
  </div>
</div>


